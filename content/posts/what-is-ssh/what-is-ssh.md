---
title: SSHλ€β“
description: SSHμ— λ€ν• μ •λ¦¬κΈ€
date: 2021-03-09T11:24:00
slug: what-is-ssh
tags: ["network", "ssh"]
---

![ssh](ssh.png)

μ›κ²© μ„λ²„μ— sshλ¥Ό μ΄μ©ν•΄ μ ‘μ†μ„ λ§μ΄ ν–μ§€λ§, μ •ν™•ν μ΄κ² μ–΄λ–¤ κ²ƒμΈμ§€ μ λ¨λ¥΄κ³  μΌμ—λ κ²ƒ κ°™μ•„ μ΅°μ‚¬ν•μ—¬ μ •λ¦¬ν•΄λ³΄μ•λ‹¤.

**SSH**λ” λ¦¬λ…μ¤ μ„λ²„μ— μ›κ²©μΌλ΅ μ ‘μ†ν•κΈ° μ„ν•΄ μ‚¬μ©ν•λ” λ³΄μ• ν”„λ΅ν† μ½μ„ μλ―Έν•λ‹¤. Telnetμ΄λ‚ rshκ°™μ΄ λ³΄μ•μ— μ·¨μ•½ν• λ‹¤λ¥Έ μ›κ²© ν”„λ΅ν† μ½λ“¤μ„ λ€μ²΄ν•, ν„μ¬ κ°€μ¥ λ³΄νΈμ μΈ μ›κ²© μ ‘μ† ν”„λ΅ν† μ½μ΄λ‹¤. SSHλ” ν¨ν‚·μ„ μ•”νΈν™”ν•μ—¬ μΈν„°λ„·κ°™μ΄ λ³΄μ•λμ§€ μ•λ” λ„¤νΈμ›ν¬ μ†μ—μ„λ„ μ•μ „ν• μ—°κ²°μ„ μ κ³µν•λ‹¤.

<hr>

# **SSH Work Flow**

## **μ—°κ²° μ‹μ‘**

SSH μ—°κ²°μ€ ν΄λΌμ΄μ–ΈνΈμ— μν•΄ μ‹μ‘λλ‹¤. ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„μ ssh ν¬νΈμ— TCP μ—°κ²°μ„ ν•κ² λκ³ , ssh ν”„λ΅ν† μ½ λ²„μ „κ³Ό ssh μ„λ²„μ package λ²„μ „μ„ μ–»κ² λλ‹¤. λ§μ•½ ν΄λΌμ΄μ–ΈνΈμ™€ ν”„λ΅ν† μ½ λ²„μ „μ΄ κ°™λ‹¤λ©΄ μ—°κ²°μ„ μ§„ν–‰ν•κ³ , μ•„λ‹λΌλ©΄ μ—°κ²°μ„ λλ”λ‹¤.

## **ν΄λΌμ΄μ–ΈνΈμ μ„λ²„ κ²€μ¦**

ν΄λΌμ΄μ–ΈνΈκ°€ ν”„λ΅ν† μ½ λ²„μ „μ„ ν™•μΈν• ν›„ μ—°κ²°μ„ μ§€μ†ν•κΈ°λ΅ ν•λ©΄, μ„λ²„λ” μ΄μ  ν΄λΌμ΄μ–ΈνΈμ—κ² **κ³µκ° ν‚¤(public key)** λ¥Ό κ±΄λ„¤μ¤€λ‹¤. λ§μ•½ μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈκ°€ μ²μ μ—°κ²°ν•λ‹¤λ©΄, ν΄λΌμ΄μ–ΈνΈλ” λ‹¤μκ³Ό κ°™μ€ κ²½κ³  λ©”μ‹μ§€λ¥Ό λ°›λ”λ‹¤.

```bash
The authenticity of host '[ip]:[port]' can't be established.
RSA key fingerprint is [server's public key].
Are you sure you want to continue connecting (yes/no/[fingerprint])?
```

μ—°κ²°μ„ ν•λ² ν•κ³  λ‚λ©΄ ν•΄λ‹Ή ν‚¤λ” ν΄λΌμ΄μ–ΈνΈμ `~/.ssh/known_hosts`νμΌμ— μ €μ¥λμ–΄ μ΄ν›„ ν•΄λ‹Ή μ„λ²„μ— μ ‘μ†μ‹μ—” ν΄λΌμ΄μ–ΈνΈκ°€ ν•΄λ‹Ή νμΌμ„ μ°Έκ³ ν•μ—¬ μ„λ²„λ¥Ό ν™•μΈν•λ―€λ΅ κ²½κ³  μ—†μ΄ μ—°κ²°λλ‹¤.

## **μ„Έμ… ν‚¤ μƒμ„±**

μ„λ²„λ¥Ό ν™•μΈν•κ³  λ‚λ©΄, μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈλ” [Diffie-Hellman μ•κ³ λ¦¬μ¦](https://ko.wikipedia.org/wiki/%EB%94%94%ED%94%BC-%ED%97%AC%EB%A8%BC_%ED%82%A4_%EA%B5%90%ED%99%98)μ„ μ΄μ©ν•΄ κ°™μ΄ **μ„Έμ… ν‚¤(session key)**λ¥Ό λ§λ“ λ‹¤(SSH λ²„μ „ 2 κΈ°μ¤€μ΄λ©°, λ²„μ „ 1μ€ λ‹¤λ¥Έ λ°©μ‹μΌλ΅ μ„λ²„ νΌμ μ„Έμ… ν‚¤λ¥Ό λ§λ“ λ‹¤). μ΄λ ‡κ² λ§λ“¤μ–΄μ§„ μ„Έμ… ν‚¤λ” λ€μΉ­ ν‚¤(μ•”νΈν™”μ™€ λ³µνΈν™”μ— κ°™μ€ ν‚¤λ¥Ό μ‚¬μ©ν•λ‹¤)μ΄λ©°, μ•μΌλ΅ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°„μ λ¨λ“  ν†µμ‹ μ„ μ•”νΈν™”, λ³µνΈν™”ν•λ”λ° μ‚¬μ©λλ‹¤.

## **ν΄λΌμ΄μ–ΈνΈ μΈμ¦**

λ§μ§€λ§‰μΌλ΅λ”, ν΄λΌμ΄μ–ΈνΈμ μΈμ¦ κ³Όμ •μ„ κ±°μΉλ‹¤. μΈμ¦μ€ **password λ°©μ‹**κ³Ό **key λ°©μ‹**μ΄ μλ‹¤.

π”Ά **Passwordλ΅ μΈμ¦**

password μΈμ¦μ€ keyλ°©μ‹μ— λΉ„ν•΄ κ°„λ‹¨ν•λ‹¤. ν΄λΌμ΄μ–ΈνΈλ” λ΅κ·ΈμΈμ„ μ›ν•λ” κ³„μ •μ λΉ„λ°€λ²νΈλ¥Ό μ…λ ¥ν•μ—¬ μ ‘μ†ν•λ‹¤. μ΄ λ• μ „μ†΅λλ” passwordλ” Step 3μ—μ„ λ§λ“¤μ–΄λ‚Έ μ„Έμ… ν‚¤λ΅ μ•”νΈν™”λμ–΄ μ „μ†΅λκΈ° λ•λ¬Έμ— μ•μ „ν•λ‹¤.

π”‘ **Keyλ΅ μΈμ¦**

μΈμ¦μ€ [κ³µκ°ν‚¤ μ•”νΈ λ°©μ‹](https://ko.wikipedia.org/wiki/%EA%B3%B5%EA%B0%9C_%ED%82%A4_%EC%95%94%ED%98%B8_%EB%B0%A9%EC%8B%9D)μΌλ΅ μ§„ν–‰λλ‹¤. μ•”νΈν™”μ— μ‚¬μ©λλ©° λ„κµ¬μ—κ²λ‚ κ³µμ  κ°€λ¥ν• **κ³µκ°ν‚¤(Public key)** μ™€, λ³µνΈν™”μ— μ‚¬μ©λκ³  μ•„λ¬΄μ—κ²λ„ κ³µμ ν•΄μ„λ” μ• λλ” **κ°μΈ ν‚¤(Private key)** λ¥Ό μ΄μ©ν•΄ μ•”νΈν™”λ¥Ό μ§„ν–‰ν•λ‹¤.

κ³Όμ •μ€ λ‹¤μκ³Ό κ°™λ‹¤.

1. ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„μ— κ³µκ° ν‚¤λ¥Ό λ³΄λ‚Έλ‹¤.
2. μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈκ°€ κ³µκ° ν‚¤λ΅ μ ‘μ†ν•κΈΈ μ›ν•λ” κ³„μ •μ `~/.ssh/authorized_keys` νμΌμ„ μ°Έκ³ ν•λ‹¤.
3. ν•΄λ‹Ή ν‚¤κ°€ νμΌμ— μ΅΄μ¬ν•λ‹¤λ©΄, μ„λ²„λ” μƒμ„±ν• λ‚μλ΅ κ³µκ° ν‚¤λ¥Ό μ•”νΈν™”ν• ν›„ ν΄λΌμ΄μ–ΈνΈλ΅ λ³΄λ‚Έλ‹¤.
4. λ§μ•½ ν΄λΌμ΄μ–ΈνΈκ°€ κ³µκ°ν‚¤μ™€ μμΈ κ°μΈ ν‚¤λ¥Ό κ°€μ§€κ³  μμΌλ©΄, ν΄λΌμ΄μ–ΈνΈλ” ν•΄λ‹Ή λ©”μ‹μ§€λ¥Ό ν’€μ–΄μ„ μ„λ²„κ°€ λ§λ“¤μ–΄λ‚Έ λ‚μλ¥Ό μ•κ² λλ‹¤.
5. ν΄λΌμ΄μ–ΈνΈλ” μ•κ² λ λ‚μμ™€, μ•μ„ κ³µμ ν• μ„Έμ… ν‚¤λ¥Ό μ—°μ‚°ν•μ—¬ ν•΄λ‹Ή κ°’μ [MD5](https://ko.wikipedia.org/wiki/MD5) Hash κ°’μ„ κ³„μ‚°ν•λ‹¤.
6. ν΄λΌμ΄μ–ΈνΈλ” μ΄ MD5 Hashλ¥Ό, μ„λ²„μ μ”μ²­μ— λ€ν• λ‹µμΌλ΅ λ³΄λ‚Έλ‹¤.
7. μ„λ²„λ„ λ§μ°¬κ°€μ§€λ΅ μ„Έμ… ν‚¤μ™€ λ‚μλ¥Ό μ΄μ©ν•μ—¬ MD5 Hash κ°’μ„ μ¤μ¤λ΅ κ³„μ‚°ν•κ³ , μ΄ κ°’κ³Ό ν΄λΌμ΄μ–ΈνΈκ°€ λ³΄λ‚Έ κ°’μ„ λΉ„κµν•λ‹¤. λ§μ•½ λ‘ κ°’μ΄ μΌμΉν•λ©΄ ν΄λΌμ΄μ–ΈνΈμ μΈμ¦μ΄ μ™„λ£λλ‹¤.

## **μΈμ¦ μ™„λ£**

λ¨λ“  μΈμ¦μ΄ μ™„λ£λλ©΄, ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„μ μ—°κ²°μ΄ μλ¦½λλ‹¤.

μ•μΌλ΅μ λ¨λ“  ν†µμ‹ μ€ Step 3μ—μ„ λ§λ“¤μ–΄λ‚Έ μ„Έμ…ν‚¤λ΅ μ•”νΈν™”λ λ³΄μ• μ±„λ„μ„ ν†µν•΄ μ΄λ£¨μ–΄μ§„λ‹¤. κ³µκ°ν‚¤ μ•”νΈν™” λ°©μ‹μ€ λ€μΉ­ν‚¤ λ°©μ‹λ³΄λ‹¤ λΉ„μ©μ΄ λ§μ΄ λ“¤κΈ° λ•λ¬Έμ— μ„Έμ… ν‚¤λ¥Ό μ΄μ©ν•μ—¬ μ•”νΈν™”μ™€ λ³µνΈν™”λ¥Ό μ§„ν–‰ν•λ‹¤.

<hr>

# **SSH Keyλ΅ μΈμ¦ν•κΈ°**

μ΄μ  ν¨μ¤μ›λ“ λ€μ‹  ν‚¤λ¥Ό μ΄μ©ν•΄ μ›κ²© μ„λ²„μ— μΈμ¦ν•λ” λ°©λ²•μ„ μ‚΄ν΄λ³΄μ

## **RSA ν‚¤ μƒμ„±**

λ€λ¶€λ¶„μ OSμ—λ” OpenSSHλΌλ” ssh client ν”„λ΅κ·Έλ¨μ΄ μ„¤μΉλμ–΄ μλ”λ°, OpenSSHλ΅ μ‰½κ² key pairλ¥Ό λ§λ“¤ μ μλ‹¤. λ¨Όμ € ν„°λ―Έλ„μ„ μ—΄κ³  μ•„λ μ»¤λ§¨λ“λ¥Ό μ…λ ¥ν•λ‹¤.

```bash
$ ssh-keygen -t rsa
```

`-t`λ” key νƒ€μ…μ„ μ§€μ •ν•λ” μµμ…μ΄λ©°, rsa1, rsa, dsa μ΄ 3κ°€μ§€κ°€ μλ‹¤.

rsa1μ€ ν”„λ΅ν† μ½ λ²„μ „ 1μ„ μ„ν• κ²ƒμ΄λ©° rsaμ™€ dsaλ” λ²„μ „ 2λ¥Ό μ„ν• κ²ƒμΈλ°, ν„μ¬ λ²„μ „1μ€ κ±°μ μ—†μΌλ©° dsaλ³΄λ‹¤λ” rsaλ¥Ό μ‚¬μ©ν•  κ²ƒμ΄ κ¶μ¥λλ―€λ΅ rsa νƒ€μ…μΌλ΅ keyλ¥Ό λ§λ“ λ‹¤.

## **ν‚¤ μ €μ¥ λ° λΉ„λ°€λ²νΈ μ„¤μ •**

μ„μ μ»¤λ§¨λ“λ¥Ό μ…λ ¥ν•λ©΄ λ‹¤μκ³Ό κ°™μ€ μ§λ¬Έμ΄ λ‚μ¨λ‹¤.

```bash
Enter file in which to save the key (~/.ssh/id_rsa):
```

λ°”λ΅ `Enter`λ¥Ό μ…λ ¥ν•κ² λλ©΄ μ†μ— ν‘μ‹λ μ„μΉμ— keyκ°€ μ €μ¥λκ³ , μ•„λ‹λ©΄ μ§μ ‘ κ²½λ΅λ¥Ό μ…λ ¥ν•λ©΄ λλ‹¤.

```bash
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
```

κ·Έλ¦¬κ³  λ‚λ©΄ μ•”νΈλ¥Ό μ…λ ¥ν•λΌλ” λ©”μ‹μ§€κ°€ λ¬λ‹¤. μ•”νΈλ¥Ό μ„¤μ •ν•κ² λλ©΄, κ°μΈ ν‚¤λ¥Ό μ‚¬μ©ν•  λ• λ§λ‹¤ μ•”νΈλ¥Ό μ…λ ¥ν•΄μ•Ό ν•λ” λ‹¨μ μ΄ μμ§€λ§ μΆ€ λ” μ•μ „ν•λ‹¤.

λ§μ•½ μ„¤μ •ν•κΈ° μ‹«λ‹¤λ©΄ λ°”λ΅ `Enter`λ¥Ό μ…λ ¥ν•λ©΄ λλ‹¤.

μ•”νΈ μ„¤μ •κΉμ§€ λ§μΉλ©΄, μ§€μ •ν–λ κ²½λ΅μ— public keyλ” `id_rsa.pub`μΌλ΅, private keyλ” `id_rsa`λ΅ μ €μ¥λμ–΄ μλ‹¤.

## **μ›κ²© μ„λ²„μ— κ³µκ° ν‚¤ λ³µμ‚¬ν•κΈ°**

μ΄μ  ν‚¤ μƒμ„±μ„ λ§μΉκ³  λ‚λ©΄, μ ‘μ†μ„ μ›ν•λ” μ„λ²„μ `~/.ssh/authorized_keys` νμΌμ— κ³µκ° ν‚¤λ¥Ό λ³µμ‚¬ν•΄λ†“μΌλ©΄ λλ‹¤.

μ•„λμ²λΌ `ssh-copy-id` μ»¤λ§¨λ“λ¥Ό μ‚¬μ©ν•κ±°λ‚

```bash
# -i optionμΌλ΅ κ³µκ° ν‚¤ κ²½λ΅λ¥Ό μ§€μ •ν•λ©΄ λλ‹¤.
$ ssh-copy-id -i ~/.ssh/id_rsa.pub username@ip-address
```

λλ” `ssh` μ»¤λ§¨λ“"<sup>μ»¤λ§¨λ“</sup>"λ¥Ό μ΄μ©ν•μ—¬ λ³µμ‚¬ν•  μ μλ‹¤.

```bash
$ cat ~/.ssh/id_rsa | ssh username@ip-address "mkdir -p ~/.ssh && chmod 700 ~/.ssh && cat >>  ~/.ssh/authorized_keys"
```

μ„μ λ‘ λ°©λ²• λ§κ³ λ„, μ§μ ‘ λ³µμ‚¬λ¥Ό ν• μλ„ μλ‹¤.

μ•„λ μ»¤λ§¨λ“λ¥Ό μ…λ ¥ν•μ—¬, λ³µμ‚¬λ¥Ό μ›ν•λ” κ³µκ° ν‚¤μ λ‚΄μ©μ„ ν™•μΈν•κ³  `~/.ssh/authorized_keys`νμΌμ— μλ™μΌλ΅ λ¶™μ—¬λ„£μΌλ©΄ λλ‹¤.

```bash
$ cat ~/.ssh/id_rsa.pub
```

λ§μ•½ μ›κ²© μ„λ²„μ— `~/.ssh`ν΄λ”κ°€ μ—†λ‹¤λ©΄, ν΄λ”λ¥Ό μƒμ„±ν• ν›„ νμΌμ„ λ§λ“¤μ–΄ ν‚¤λ¥Ό λ³µμ‚¬ν•λ‹¤.

```bash
$ mkdir -p ~/.ssh
$ echo [public key string] >> ~/.ssh/authorized_keys
```

μ„μ κ³Όμ •μ„ κ±°μ³ μ„λ²„μ— κ³µκ° ν‚¤λ¥Ό λ³µμ‚¬ν•κ³  λ‚λ©΄, λ‹¤μ μ»¤λ§¨λ“λ΅ λΉ„λ°€λ²νΈ μ—†μ΄ μ ‘μ†μ΄ κ°€λ¥ν•λ‹¤.

```bash
$ ssh username@ip-address
```

<hr>

# **References**

[SSH Essentials: Working with SSH Servers, Clients, and Keys](https://www.digitalocean.com/community/tutorials/ssh-essentials-working-with-ssh-servers-clients-and-keys)

[Wikipedia: SSH (Secure Shell)](<https://en.wikipedia.org/wiki/SSH_(Secure_Shell)>)

[Understanding SSH workflow](https://medium.com/@Magical_Mudit/understanding-ssh-workflow-66a0e8d4bf65#:~:text=SSH%20protocol%20uses%20symmetric%20encryption,to%20encrypt%20all%20the%20communication)

[How To Set Up SSH Keys](https://www.digitalocean.com/community/tutorials/how-to-set-up-ssh-keys-2#step-two%E2%80%94store-the-keys-and-passphrase)

<br>

νΉμ‹ λ‚΄μ©μ— μ¤λ¥κ°€ μμ„ κ²½μ° λ“κΈ€λ΅ μ•λ ¤μ£Όμ„Έμ” π™‚
